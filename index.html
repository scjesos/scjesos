<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>행사장 지도</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  height: 100vh;
}

/* 지도 확대/스크롤용 */
.zoom-wrapper {
  width: 100%;
  height: 100%;
  overflow: auto;
  touch-action: pan-x pan-y pinch-zoom;
}

.map-container {
  position: relative;
  width: 200%;
}

.map-container img {
  width: 100%;
  display: block;
}

.hotspot {
  position: absolute;
  cursor: pointer;
}

/* 팝업 - 화면 기준 고정 */
.popup {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.popup-content {
  width: 420px;
  max-width: 90%;
  max-height: 85%;
  background: #fff;
  padding: 20px;
  border-radius: 16px;
  text-align: center;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  overflow: hidden;
  font-size: 14px;
}

.popup-content img {
  width: 100%;
  height: auto;
  border-radius: 6px;
  touch-action: none; /* 팝업 확대 방지 */
  user-select: none;
}

.popup-content p {
  margin-top: 10px;
}

.close-btn, .nav-btn {
  margin-top: 10px;
  padding: 6px 12px;
  background: #333;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

.nav-btn {
  margin: 5px;
}

.nav-disabled {
  background: #999 !important;
  cursor: default;
}
</style>
</head>
<body>

<div class="zoom-wrapper">
  <div class="map-container">
    <img src="map.png" alt="행사장 지도">

    <div class="hotspot" data-name="콩이관" style="top:25.4%; left:30.8%; width:6.0%; height:6.0%;"></div>
    <div class="hotspot" data-name="홍메관" style="top:53.8%; left:45.7%; width:4.0%; height:10%;"></div>
    <div class="hotspot" data-name="다년생 식물원" style="top:35.0%; left:29.3%; width:4.5%; height:8.0%;"></div>
    <div class="hotspot" data-name="효모관" style="top:46.0%; left:40.0%; width:4.0%; height:10.0%;"></div>
  </div>
</div>

<script>
const images = {
  "콩이관": ["콩이관1.jpg","콩이관2.jpg","콩이관3.jpg","콩이관4.jpg"],
  "홍메관": ["홍메관1.jpg","홍메관2.jpg","홍메관3.jpg"],
  "다년생 식물원": ["다년생식물원1.jpg","다년생식물원2.jpg","다년생식물원3.jpg"],
  "효모관": ["효모관1.jpg","효모관2.jpg","효모관3.jpg"]
};

const descs = {
  "콩이관": ["설명1","설명2","설명3","설명4"],
  "홍메관": ["설명1","설명2","설명3"],
  "다년생 식물원": ["설명1","설명2","설명3"],
  "효모관": ["설명1","설명2","설명3"]
};

function showPopup(name) {
  let idx = 0;

  // 팝업을 지도 밖 body에 생성
  const popup = document.createElement("div");
  popup.className = "popup";
  popup.innerHTML = `
    <div class="popup-content">
      <img src="${images[name][idx]}" alt="${name}">
      <p>${descs[name][idx]}</p>
      <div>
        <button class="nav-btn nav-left">◀</button>
        <button class="nav-btn nav-right">▶</button>
      </div>
      <button class="close-btn">닫기</button>
    </div>
  `;
  document.body.appendChild(popup);

  const imgEl = popup.querySelector("img");
  const textEl = popup.querySelector("p");
  const closeBtn = popup.querySelector(".close-btn");
  const leftBtn = popup.querySelector(".nav-left");
  const rightBtn = popup.querySelector(".nav-right");

  function updateNav() {
    leftBtn.classList.toggle("nav-disabled", idx === 0);
    rightBtn.classList.toggle("nav-disabled", idx === images[name].length - 1);
  }

  updateNav();

  leftBtn.addEventListener("click", () => {
    if (idx > 0) {
      idx--;
      imgEl.src = images[name][idx];
      textEl.textContent = descs[name][idx];
      updateNav();
    }
  });

  rightBtn.addEventListener("click", () => {
    if (idx < images[name].length - 1) {
      idx++;
      imgEl.src = images[name][idx];
      textEl.textContent = descs[name][idx];
      updateNav();
    }
  });

  closeBtn.addEventListener("click", () => popup.remove());
}

document.querySelectorAll(".hotspot").forEach(h => {
  h.addEventListener("click", () => {
    showPopup(h.dataset.name);
  });
});
</script>

</body>
</html>
