<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>행사장 지도</title>
<style>
  body {
    margin:0;
    font-family: Arial,sans-serif;
    background:#f9f9f9;
    height:100vh;
    overflow:hidden;
  }

  /* 지도 확대/이동 */
  .zoom-wrapper {
    width:100%;
    height:100%;
    overflow:auto;
    touch-action: pan-x pan-y pinch-zoom;
  }

  .map-container {
    position:relative;
    width:200%;
    height:auto;
  }
  .map-container img {
    width:100%;
    height:auto;
    display:block;
  }

  .hotspot {
    position:absolute;
    cursor:pointer;
  }

  /* 팝업 */
  .popup {
    position:fixed; /* 화면 고정 */
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.7);
    display:flex; justify-content:center; align-items:center;
    z-index:9999;
    padding:10px;
    box-sizing:border-box;
  }

  .popup-content {
    background:#fff;
    padding:20px;
    border-radius:8px;
    width:400px;          /* 고정 크기 */
    max-width:90%;
    text-align:center;
    box-shadow:0 4px 12px rgba(0,0,0,0.3);
    position: relative;
    font-size:14px;
  }

  .popup-content h2 {
    font-size:16px;
    margin-bottom:10px;
  }

  .popup-content img {
    width:100%;        /* 팝업 안에서만 크기 고정 */
    height:auto;
    border-radius:6px;
    touch-action:none; /* 확대 금지 */
    user-select:none;
  }

  .popup-content p {
    margin-top:10px;
  }

  .close-btn, .arrow-btn {
    margin-top:10px;
    padding:6px 12px;
    border:none;
    border-radius:4px;
    cursor:pointer;
    font-size:14px;
  }

  .arrow-btn { margin:5px; }
  .arrow-left.disabled, .arrow-right.disabled { opacity:0.3; cursor:not-allowed; }
</style>
</head>
<body>

<div class="zoom-wrapper">
  <div class="map-container">
    <img src="map.png" alt="행사장 지도">

    <!-- 예시 핫스팟 -->
    <div class="hotspot" data-name="콩이관" style="top:25.4%; left:30.8%; width:6%; height:6%;"></div>
  </div>
</div>

<script>
const images = {
  "콩이관":["콩이관1.jpg","콩이관2.jpg","콩이관3.jpg"]
};
const descs = {
  "콩이관":["입구: 장애인 전용 길 배치","실내에 장애인 전용 화장실","실내에 장애인 전용 엘리베이터"]
};

// 핫스팟 클릭 팝업
function showPopup(name){
  let idx=0;

  const popup=document.createElement("div");
  popup.className="popup";

  const content=document.createElement("div");
  content.className="popup-content";

  const img=document.createElement("img");
  img.src=images[name][idx];

  const text=document.createElement("p");
  text.textContent=descs[name][idx];

  const closeBtn=document.createElement("button");
  closeBtn.className="close-btn";
  closeBtn.textContent="닫기";
  closeBtn.addEventListener("click",()=>popup.remove());

  const leftBtn=document.createElement("button");
  leftBtn.className="arrow-btn arrow-left disabled";
  leftBtn.textContent="<";
  leftBtn.addEventListener("click",()=>{
    if(idx>0){
      idx--;
      img.src=images[name][idx];
      text.textContent=descs[name][idx];
      updateArrows();
    }
  });

  const rightBtn=document.createElement("button");
  rightBtn.className="arrow-btn arrow-right";
  rightBtn.textContent=">";
  rightBtn.addEventListener("click",()=>{
    if(idx<images[name].length-1){
      idx++;
      img.src=images[name][idx];
      text.textContent=descs[name][idx];
      updateArrows();
    }
  });

  function updateArrows(){
    leftBtn.classList.toggle("disabled", idx===0);
    rightBtn.classList.toggle("disabled", idx===images[name].length-1);
  }

  updateArrows();

  content.appendChild(closeBtn);
  content.appendChild(img);
  content.appendChild(text);
  content.appendChild(leftBtn);
  content.appendChild(rightBtn);
  popup.appendChild(content);
  document.body.appendChild(popup);
}

// 자동 안내 팝업
window.addEventListener("load",()=>{
  const notice=document.createElement("div");
  notice.className="popup";
  notice.innerHTML=`
    <div class="popup-content">
      <h2>장류마을 테마파크는 BF인증 시설입니다.</h2>
      <p>BF인증은 장애인, 노약자, 임산부 등 사회적 약자가<br>
         시설을 안전하고 편리하게 이용할 수 있도록<br>
         보장하는 제도입니다.</p>
      <button class="close-btn">확인</button>
    </div>
  `;
  document.body.appendChild(notice);
  notice.querySelector(".close-btn").addEventListener("click",()=>notice.remove());
});

// 핫스팟 클릭 이벤트
document.querySelectorAll(".hotspot").forEach(h=>{
  h.addEventListener("click",()=>showPopup(h.dataset.name));
});
</script>
</body>
</html>
